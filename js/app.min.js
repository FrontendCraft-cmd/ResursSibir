(()=>{"use strict";function t(t,e){t.click((function(){const o=$(this),s=$(this).data("tab");o.hasClass("active")||(t.removeClass("active"),o.addClass("active"),e.removeClass("active"),$("#"+s).addClass("active"))}))}function e(t,e){t.each((function(){let t=$(this).find("li"),o=Math.ceil(t.length/e);$(this).css("grid-template-rows",`repeat(${o}, auto)`)}))}function o(){const t=$(".step-2 ul");let o=4;const s=$(document).width();s<=640&&(o=3),s<=500&&(o=2),e(t,o)}function s(){const t=$(".header"),e=$(window).height();$(window).scrollTop()>=e?t.addClass("fixed"):t.removeClass("fixed")}$(document).ready((function(){$(".footer__up").click((t=>{$("body,html").animate({scrollTop:0},500,(function(){})),t.preventDefault()})),function(){const t=$(".tabs-btn "),e=$(".tabs-content ");t.click((function(){const o=$(this),s=$(this).data("tab");o.hasClass("active")||(t.removeClass("active"),o.addClass("active"),e.removeClass("active"),$("#"+s).addClass("active")),$(".construction-technology__slider").slick("setPosition")}))}(),$(".bx-filter-parameters-box-title").click((function(){$(this).closest(".bx-filter-parameters-box").toggleClass("bx-active"),$(this).next().slideToggle()})),function(){const t=$(".filter-checkbox-block");t.length&&t.each((function(){const e=$(this).find(".filter-checkbox"),o=t.closest(".bx-filter-block");if(e.length>4){let t=0,s=0;const i="Показать еще",n=$(this),l=`<div class="filter-checkboxes-btn-show">${i}</div>`;$(this).after(l),o.show(),e.each((function(){s+=$(this).outerHeight(!0)})),e.slice(0,4).each((function(){t+=$(this).outerHeight(!0)})),o.hide(),n.height(t),n.css("overflow","hidden"),$(".filter-checkboxes-btn-show").click((function(){const e=$(this);e.toggleClass("active"),e.hasClass("active")?(e.text("Скрыть"),n.height(s)):(e.text(i),n.height(t))}))}}))}(),t($(".project-detail-tabs__link"),$(".project-detail-tabs__content")),function(){const t=$(".project-detail-right__link"),e=$(".project-detail__body"),o=$(".project-detail-tabs__link"),s=$(".project-detail-tabs__content");t.click((function(t){o.removeClass("active"),s.removeClass("active"),o.first().addClass("active"),s.first().addClass("active"),$("body,html").animate({scrollTop:e.offset().top-150},500,(function(){})),t.preventDefault()}))}(),function(){const t=$(".project-detail-tabs__content"),e=$(document).width();let o=56;e<=640&&(o=30),t.toggleClass("active");const s=$(".reviews-project-detail-tabs__item p");t.toggleClass("active"),s.each((function(){const t=$(this),e=t.text(),s=e.split(/\s+/).filter(Boolean),i=t.next("a");let n=[];s.length>o&&(n=s.slice(0,o).join(" ")+"...",t.text(n)),i.click((function(o){const s=$(this);s.hasClass("active")?(t.text(n),s.removeClass("active")):(t.text(e),s.addClass("active")),s.text(s.hasClass("active")?"Свернуть":"Развернуть"),o.preventDefault()}))}))}(),e($(".about-history ul"),2),e($(".list-characteristics"),2),e($(".project-detail-possibilities"),2),$(".spoiler__btn").click((function(t){$(".spoiler").hasClass("one")&&($(".spoiler__btn").not($(this)).removeClass("active"),$(".spoiler__content").not($(this).next()).slideUp(300)),$(this).toggleClass("active").next().slideToggle(300)})),t($(".price-list__btn"),$(".price-list__content")),e($(".step-1 ul"),2),o(),function(){const t=$(".step-1 .calculator__list li label"),e=$(".calculator-type"),o=$(".step-1 .calculator__next"),s=$(".calculator__price");let i=1,n=1,l=$(".calculator-type.active"),a=0,c=0,r=0,f=0,d=0,u=0,p=0,h=0,v=0,m=0,_=0,C={300:.52,320:.59,340:.66,360:.74,380:.82,400:.9,420:1,440:1.09,460:1.19,480:1.3,500:1.41,520:1.53,540:1.65,560:1.78,580:1.91,600:2.05,620:2.18,640:2.32},b={"content-1":{180:.15,200:.188,220:.228,240:.271,260:.319,280:.369,300:.424,320:.483},"content-2":{150:.135,180:.1944,200:.24},"content-3":C,"content-4":{300:.36,400:.6},"content-5":C,"content-6":C},k={"content-1":{"180-220":2e4,"240-300":25e3},"content-2":{150:3e4,180:3e4,200:35e3},"content-3":{"300-380":42e3,"400-480":46e3,"500-580":5e4},"content-4":{300:44e3,400:48e3},"content-5":{"440-480":5e4,"500-580":55e3},"content-6":{"440-480":6e4,"500-580":65e3}};function x(t){t.each((function(){const t=$(this);if(t.hasClass("active")){const e=$(".step-1"),o=e.find($(".current")),s=e.find($(".max")),i=t.find($(".calculator-step")),n=i.length+1;o.text(n+1-n),s.text(n),i.each((function(t,e){const o=$(this).find(".current"),s=$(this).find(".max");o.text(t+2),s.text(n)}))}}))}function w(t,e){let o=b[t];return o?o[e]:null}function g(t,e){if(k.hasOwnProperty(t)){let o=k[t];if(o.hasOwnProperty(e))return o[e];for(let t in o)if(t.includes("-")){let s=t.split("-").map(Number);if(e>=s[0]&&e<=s[1])return o[t]}return null}return null}t.click((function(){x(e),l=$(".calculator-type.active"),i=+l.attr("id").replace("content-","")})),o.off("click").on("click",(function(t){const e=$(this),o=e.closest(".calculator-step"),C=o.find("input:checked").next().text();a=o.find("input:checked").closest("label").data("note"),o.addClass("active"),n++,o.find(".calculator__value").text(C),o.removeClass("error"),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),$(".step-"+n).find(".button").addClass("show"),t.preventDefault();const b=l.find(".step-2 .calculator__next"),k=l.find(".step-2 .calculator__prev"),x=l.find(".step-3 .calculator__next"),T=l.find(".step-3 .calculator__prev"),y=l.find(".step-4 .calculator__next"),S=l.find(".step-4 .calculator__prev"),D=l.find(".step-5 .calculator__next"),j=l.find(".step-5 .calculator__prev"),N=l.find(".step-6 .calculator__prev");switch(i){case 1:case 2:b.off("click").on("click",(function(t){const e=$(this).closest(".calculator-step"),o=e.find("input:checked").next().text();e.find(".calculator__value").text(o),c=+e.find("input:checked").val(),n++,e.addClass("active"),e.find(".calculator__value").text(o),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),$(".step-"+n).find(".button").addClass("show"),t.preventDefault()})),k.off("click").on("click",(function(t){$(".step-"+n).find(".button").removeClass("show"),n--,$(".step-"+n).removeClass("active"),$("body,html").animate({scrollTop:$(".step-"+n).offset().top-150},500,(function(){})),t.preventDefault()})),x.off("click").on("click",(function(t){const e=$(this).closest(".calculator-step"),o=e.find(".calculator__list ul"),s=o.closest("li").find("input").first(),i=e.find("input:checked").first().next().text();s.val(+o.find("input:checked").val()),r=+e.find("input:checked").val(),n++,e.addClass("active"),e.find(".calculator__value").text(i),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),$(".step-"+n).find(".button").addClass("show"),f=+(r/(c-a)).toFixed(1),t.preventDefault()})),T.off("click").on("click",(function(t){$(".step-"+n).find(".button").removeClass("show"),n--,$(".step-"+n).removeClass("active"),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),t.preventDefault()})),y.off("click").on("click",(function(t){const e=$(this).closest(".calculator-step"),o=e.find("li");let s=n,i=!1;n++,e.addClass("active"),e.removeClass("error"),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),$(".step-"+n).find(".button").addClass("show"),o.each((function(){const t=$(this).find(".calculator-floors__wall input"),e=$(this).find(".calculator-floors__length input");if(""!==t.val()&&""!==e.val()){i=!0;const o=parseInt(t.val()),s=parseFloat(e.val());isNaN(o)||isNaN(s)||(d+=o*s)}})),i||(n=s,e.addClass("error"),e.removeClass("active")),e.find(".calculator__value").text(d+" м."),u=Math.ceil(d*f),p=Math.ceil(u/6);const a=w(l.attr("id"),c);h=(Math.ceil(100*(p*a+p*a*15/100))/100).toFixed(2),t.preventDefault()})),S.off("click").on("click",(function(t){$(".step-"+n).find(".button").removeClass("show"),n--,$(".step-"+n).removeClass("active"),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),t.preventDefault()})),D.off("click").on("click",(function(t){const e=$(this).closest(".calculator-step"),o=e.find("input"),i=e.find(".calculator__value"),a=l.attr("id");let r=[];n++,e.addClass("active"),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),$(".step-"+n).find(".button").addClass("show"),o.each((function(){const t=$(this);t.prop("checked")&&(v+=+t.val()*h,r.push(t.next().text()))})),i.text(r.join(", "));const f=$(".step-"+n),d=f.find(".calculator__list"),u=+f.find("input:checked").val(),p=+f.find("input").first().val();m=u*h,_+=m+v,_+=h*+g(a,c),s.addClass("show"),s.find("span").text(`от ${_.toLocaleString("ru-RU")} руб.`),t.preventDefault();let C=null;d.off("change"),d.on("change",'input[type="radio"]',(function(){let t=+$(this).val(),e=+s.find("span").text().match(/\d+/g).join("");t!==C&&(t===p?(e+=p*h,s.find("span").text(`от ${e.toLocaleString("ru-RU")} руб.`)):(e-=p*h,s.find("span").text(`от ${e.toLocaleString("ru-RU")} руб.`)),C=t)}))})),j.off("click").on("click",(function(t){$(".step-"+n).find(".button").removeClass("show"),n--,$(".step-"+n).removeClass("active"),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),d=0,t.preventDefault()})),N.off("click").on("click",(function(t){$(".step-"+n).find(".button").removeClass("show");const e=$("step-"+n).find(".calculator__list");n--,$(".step-"+n).removeClass("active"),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),s.removeClass("show"),_=0,m=0,v=0,e.off("change"),t.preventDefault()}));break;case 3:case 4:case 6:b.off("click").on("click",(function(t){const e=$(this).closest(".calculator-step"),o=e.find("input:checked").next().text();e.find(".calculator__value").text(o),c=+e.find("input:checked").val(),n++,e.addClass("active"),e.find(".calculator__value").text(o),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),$(".step-"+n).find(".button").addClass("show"),t.preventDefault()})),k.off("click").on("click",(function(t){$(".step-"+n).find(".button").removeClass("show"),n--,$(".step-"+n).removeClass("active"),$("body,html").animate({scrollTop:$(".step-"+n).offset().top-150},500,(function(){})),t.preventDefault()})),x.off("click").on("click",(function(t){const e=$(this).closest(".calculator-step"),o=e.find(".calculator__list ul"),s=o.closest("li").find("input").first(),i=e.find("input:checked").first().next().text();s.val(+o.find("input:checked").val()),r=+e.find("input:checked").val(),n++,e.addClass("active"),e.find(".calculator__value").text(i),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),$(".step-"+n).find(".button").addClass("show"),f=+(r/(c-a)).toFixed(1),t.preventDefault()})),T.off("click").on("click",(function(t){$(".step-"+n).find(".button").removeClass("show"),n--,$(".step-"+n).removeClass("active"),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),t.preventDefault()})),y.off("click").on("click",(function(t){const e=$(this).closest(".calculator-step"),o=e.find("li");let i=n,a=!1;n++,e.addClass("active"),e.removeClass("error"),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),$(".step-"+n).find(".button").addClass("show"),u=0,p=0,h=0,d=0,o.each((function(){const t=$(this).find(".calculator-floors__wall input"),e=$(this).find(".calculator-floors__length input");if(""!==t.val()&&""!==e.val()){a=!0;const o=parseInt(t.val()),s=parseFloat(e.val());isNaN(o)||isNaN(s)||(d+=o*s)}})),a||(n=i,e.addClass("error"),e.removeClass("active")),e.find(".calculator__value").text(d+" м."),u=Math.ceil(d*f),p=Math.ceil(u/6);const r=l.attr("id"),m=w(r,c);h=(Math.ceil(100*(p*m+p*m*15/100))/100).toFixed(2);const C=l.find(".step-"+n).find("input");let b=0;C.prop("checked")&&(b=+C.val()),v=b,_+=v*h,_+=h*+g(r,c),s.addClass("show"),s.find("span").text(`от ${_.toLocaleString("ru-RU")} руб.`);let k=+s.find("span").text().match(/\d+/g).join("");C.off("click").on("click",(function(t){const e=$(this);e.prop("checked")?(k+=+e.val()*h,s.find("span").text(`от ${k.toLocaleString("ru-RU")} руб.`)):(k-=+e.val()*h,s.find("span").text(`от ${k.toLocaleString("ru-RU")} руб.`))})),t.preventDefault()})),S.off("click").on("click",(function(t){$(".step-"+n).find(".button").removeClass("show"),n--,$(".step-"+n).removeClass("active"),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),t.preventDefault()})),j.off("click").on("click",(function(t){$(".step-"+n).find(".button").removeClass("show"),n--,$(".step-"+n).removeClass("active"),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),s.removeClass("show"),_=0,m=0,v=0,u=0,p=0,h=0,t.preventDefault()}));break;case 5:b.off("click").on("click",(function(t){const e=$(this).closest(".calculator-step"),o=e.find("input"),i=e.find("input:checked").next().text();e.find(".calculator__value").text(i),n++,e.addClass("active"),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),$(".step-"+n).find(".button").addClass("show"),v=0,o.prop("checked")&&(v=+o.val()),l.find(".step-"+n).find("input").prop("disabled",!1);const a=l.find(".step-3 input");if(a.focus(),""!==a.val()){let t=+a.val();_=5e4*t+t*v,s.find("span").text(`от ${_.toLocaleString("ru-RU")} руб.`),s.addClass("show")}a.off("input").on("input",(function(){let t=+a.val();_=5e4*t+t*v,s.find("span").text(`от ${_.toLocaleString("ru-RU")} руб.`),s.addClass("show")})),t.preventDefault()})),k.off("click").on("click",(function(t){$(".step-"+n).find(".button").removeClass("show"),n--,$(".step-"+n).removeClass("active"),$("body,html").animate({scrollTop:$(".step-"+n).offset().top-150},500,(function(){})),t.preventDefault()})),T.off("click").on("click",(function(t){$(".step-"+n).find(".button").removeClass("show"),n--,e.closest(".calculator-step").find("input").prop("disabled",!1),$(".step-"+n).removeClass("active"),$("body,html").animate({scrollTop:l.find(".step-"+n).offset().top-150},500,(function(){})),s.removeClass("show"),t.preventDefault()}))}})),function(){const t=$(".step-1 .calculator__list li label"),e=$(".calculator-type");t.click((function(){const t=$(this).data("tab");e.removeClass("active"),$("#"+t).addClass("active")}))}(),x(e)}(),s(),$(".form-group").each((function(){const t=$(this),e=t.find("label"),o=t.find("input");o.on("focus",(function(){e.hide()})),o.on("blur",(function(){""===o.val().trim()&&e.show()})),o.on("input",(function(){""!==o.val().trim()?e.hide():e.show()}))})),function(){const t=$(".header-catalog"),e=$(".header-catalog-open"),o=$(".header-catalog-list");t.hover((function(){o.addClass("active"),e.addClass("active")}),(function(){o.removeClass("active"),e.removeClass("active")}))}(),function(){const t=$(".header-mobile-menu-open"),e=$(".header-mobile-menu__row"),o=$(".header-mobile-menu__close"),s=$(".header-bg");t.click((t=>{e.addClass("active"),s.addClass("active"),$("body").addClass("lock"),t.preventDefault(),$(".header").hasClass("fixed")&&$(".header").addClass("show")})),o.click((t=>{e.removeClass("active"),s.removeClass("active"),$("body").removeClass("lock"),t.preventDefault(),$(".header").hasClass("fixed")&&$(".header").removeClass("show")}))}(),function(){const t=$(".section-catalog__open-filter"),e=$(".section-catalog__row"),o=$(".header-bg"),s=$(".bx-filter-close");t.click((function(){e.addClass("active"),o.addClass("active"),$("body").addClass("lock")})),s.click((function(){e.removeClass("active"),o.removeClass("active"),$("body").removeClass("lock")}))}(),$(window).scroll(s),$(window).resize(o),$(".header-mobile-menu__nav").slinky({title:!0}),$(".back").text("Назад");let i=$(".main-banner__slider"),n=$(".custom-counter-main-banner");i.on("init",(function(t,e,o){let s=e.slideCount;n.text(e.currentSlide+1+"/"+s)})),i.on("afterChange",(function(t,e,o){let s=e.currentSlide+1;n.text(s+"/"+e.slideCount)})),i.slick({slidesToShow:1,slidesToScroll:1,infinite:!1,prevArrow:$(".main-banner-arrow-prev"),nextArrow:$(".main-banner-arrow-next")}),$(".advantages-houses__slider").slick({slidesToShow:1,slidesToScroll:1,infinite:!1,arrows:!1,variableWidth:!0}),$(".completed-projects__slider").slick({slidesToShow:1,slidesToScroll:1,infinite:!1,arrows:!1,variableWidth:!0}),$(".command__slider").slick({slidesToShow:4,slidesToScroll:1,infinite:!0,arrows:!1,autoplay:!0,autoplaySpeed:3e3,responsive:[{breakpoint:992,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:400,settings:{slidesToShow:1,variableWidth:!0}}]}),$(".project-detail-slider").slick({slidesToShow:1,slidesToScroll:1,infinite:!0,arrows:!1,asNavFor:".project-detail-slider-nav",responsive:[{breakpoint:640,settings:{slidesToShow:3,variableWidth:!0}}]}),$(".project-detail-slider-nav").slick({slidesToShow:6,slidesToScroll:1,infinite:!0,asNavFor:".project-detail-slider",arrows:!0,focusOnSelect:!0});let l=$(".stages-manufacture__slider"),a=$(".custom-counter-stages-manufacture");l.on("init",(function(t,e,o){let s=e.slideCount;a.text(e.currentSlide+1+"/"+s)})),l.on("afterChange",(function(t,e,o){let s=e.currentSlide+1;a.text(s+"/"+e.slideCount)})),l.slick({slidesToShow:1,slidesToScroll:1,infinite:!0,prevArrow:$(".stages-manufacture-arrow-prev"),nextArrow:$(".stages-manufacture-arrow-next"),adaptiveHeight:!0});let c=$(".articles-detail__slider"),r=$(".custom-counter-articles-detail");c.on("init",(function(t,e,o){let s=e.slideCount;r.text(e.currentSlide+1+"/"+s)})),c.on("afterChange",(function(t,e,o){let s=e.currentSlide+1;r.text(s+"/"+e.slideCount)})),c.slick({slidesToShow:1,slidesToScroll:1,infinite:!0,prevArrow:$(".articles-detail-arrow-prev"),nextArrow:$(".articles-detail-arrow-next"),variableWidth:!0}),$(".construction-technology__slider").slick(),$(".stages-manufacture-mobile__slider").slick({slidesToShow:2,slidesToScroll:1,arrows:!1,responsive:[{breakpoint:600,settings:{slidesToShow:1,variableWidth:!0}}]})}))})();